{
  "id": "git-summary",
  "version": "1.0.0",
  "metadata": {
    "name": "Git Commit Summary",
    "description": "Generates a summary of recent Git commits",
    "author": "Flui Team",
    "created": "2025-11-02",
    "tags": ["git", "commits", "summary"],
    "category": "development"
  },
  "triggers": [
    {
      "type": "contains",
      "pattern": "resumo de commits"
    },
    {
      "type": "contains",
      "pattern": "git summary"
    },
    {
      "type": "contains",
      "pattern": "commits recentes"
    }
  ],
  "variables": {
    "gitLog": {
      "type": "string",
      "defaultValue": ""
    },
    "summary": {
      "type": "string",
      "defaultValue": ""
    },
    "hasCommits": {
      "type": "boolean",
      "defaultValue": false
    }
  },
  "steps": [
    {
      "id": "step_1",
      "type": "log",
      "message": "?? Fetching Git commits...",
      "level": "info"
    },
    {
      "id": "step_2",
      "type": "tool",
      "toolName": "execute_shell",
      "toolArgs": {
        "command": "git log --since='7 days ago' --pretty=format:'%h - %s (%an, %ar)' --abbrev-commit",
        "timeout": 5000
      },
      "saveResultAs": "gitLog",
      "continueOnError": true
    },
    {
      "id": "step_3",
      "type": "conditional",
      "condition": "variables.gitLog.length > 10",
      "thenSteps": ["step_4", "step_5"],
      "elseSteps": ["step_6"]
    },
    {
      "id": "step_4",
      "type": "log",
      "message": "?? Analyzing commits with AI...",
      "level": "info"
    },
    {
      "id": "step_5",
      "type": "llm_process",
      "prompt": "Analyze these Git commits from the last 7 days and create a summary:\n\n${variables.gitLog}\n\nProvide:\n1. Main changes summary\n2. Key features added\n3. Bug fixes\n4. Contributors\n5. Overall progress assessment",
      "useContext": false,
      "saveResultAs": "summary",
      "nextStep": "step_7"
    },
    {
      "id": "step_6",
      "type": "set_variable",
      "variableName": "summary",
      "value": "No commits found in the last 7 days.",
      "nextStep": "step_7"
    },
    {
      "id": "step_7",
      "type": "tool",
      "toolName": "write_file",
      "toolArgs": {
        "file_path": "git-summary-${Date.now()}.md",
        "content": "# Git Commit Summary\n\n**Period:** Last 7 days\n\n## Commits\n\n${variables.gitLog}\n\n## AI Analysis\n\n${variables.summary}"
      }
    },
    {
      "id": "step_8",
      "type": "log",
      "message": "? Git summary created!",
      "level": "success"
    }
  ],
  "errorHandling": {
    "onStepError": "skip",
    "maxRetries": 1,
    "logErrors": true
  }
}
