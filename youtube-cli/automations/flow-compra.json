{
  "id": "flow-compra",
  "version": "1.0.0",
  "metadata": {
    "name": "Fluxo de Compra",
    "description": "AutomaÃ§Ã£o de compra - coleta dados e envia para API",
    "author": "FLUI Team",
    "created": "2025-11-04",
    "tags": ["webhook", "compra", "e-commerce"],
    "category": "flows"
  },
  "triggers": [],
  "variables": {
    "produto": {
      "type": "string",
      "defaultValue": ""
    },
    "quantidade": {
      "type": "string",
      "defaultValue": "1"
    },
    "email": {
      "type": "string",
      "defaultValue": ""
    },
    "total": {
      "type": "string",
      "defaultValue": "0"
    }
  },
  "steps": [
    {
      "id": "step_1",
      "type": "log",
      "message": "ðŸ›’ Iniciando fluxo de compra...",
      "level": "info"
    },
    {
      "id": "step_2",
      "type": "set_variable",
      "variableName": "produto",
      "value": "FLUI Pro License"
    },
    {
      "id": "step_3",
      "type": "set_variable",
      "variableName": "quantidade",
      "value": "1"
    },
    {
      "id": "step_4",
      "type": "set_variable",
      "variableName": "email",
      "value": "cliente@example.com"
    },
    {
      "id": "step_5",
      "type": "set_variable",
      "variableName": "total",
      "value": "299.00"
    },
    {
      "id": "step_6",
      "type": "log",
      "message": "ðŸ“¦ Produto: ${variables.produto} | Qtd: ${variables.quantidade} | Total: R$ ${variables.total}",
      "level": "info"
    },
    {
      "id": "step_7",
      "type": "tool",
      "toolName": "trigger_webhook",
      "toolArgs": {
        "url": "https://webhook.site/unique-id",
        "method": "POST",
        "payload": {
          "tipo": "compra",
          "produto": "${variables.produto}",
          "quantidade": "${variables.quantidade}",
          "email": "${variables.email}",
          "total": "${variables.total}",
          "timestamp": "${Date.now()}"
        },
        "headers": {
          "Authorization": "Bearer FLUI_TOKEN_123",
          "Content-Type": "application/json"
        }
      }
    },
    {
      "id": "step_8",
      "type": "log",
      "message": "âœ… Dados enviados para API com sucesso!",
      "level": "success"
    }
  ],
  "errorHandling": {
    "onStepError": "skip",
    "maxRetries": 2,
    "logErrors": true
  }
}
