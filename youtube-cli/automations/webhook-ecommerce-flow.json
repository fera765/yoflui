{
  "id": "webhook-ecommerce-flow",
  "version": "1.0.0",
  "metadata": {
    "name": "E-commerce Webhook",
    "description": "Processa webhook de e-commerce e roteia fluxo",
    "author": "FLUI Team",
    "created": "2025-11-04",
    "tags": ["webhook", "ecommerce"],
    "category": "integrations"
  },
  "triggers": [
    {
      "type": "contains",
      "pattern": "ecommerce"
    }
  ],
  "variables": {
    "acao": {"type": "string", "defaultValue": "COMPRAR"},
    "produto": {"type": "string", "defaultValue": "FLUI Pro"},
    "valor": {"type": "string", "defaultValue": "299.00"},
    "routeResult": {"type": "string", "defaultValue": ""}
  },
  "steps": [
    {
      "id": "1",
      "type": "log",
      "message": "ðŸ”” Webhook recebido: ${variables.acao}",
      "level": "info"
    },
    {
      "id": "2",
      "type": "tool",
      "toolName": "condition",
      "toolArgs": {
        "value": "${variables.acao}",
        "conditions": [
          {"pattern": "COMPRAR", "nextFlow": "flow-compra", "matchType": "contains"},
          {"pattern": "CANCELAR", "nextFlow": "flow-cancelamento", "matchType": "contains"}
        ],
        "defaultFlow": "flow-default",
        "caseSensitive": false
      },
      "saveResultAs": "routeResult"
    },
    {
      "id": "3",
      "type": "tool",
      "toolName": "write_file",
      "toolArgs": {
        "file_path": "webhook-log.json",
        "content": "{\"acao\":\"${variables.acao}\",\"produto\":\"${variables.produto}\",\"valor\":\"${variables.valor}\"}"
      }
    },
    {
      "id": "4",
      "type": "log",
      "message": "âœ… Webhook processado!",
      "level": "success"
    }
  ],
  "errorHandling": {
    "onStepError": "skip",
    "maxRetries": 0,
    "logErrors": true
  }
}
